(()=>{var b={onLoad(){let{container:e}=this;try{AT.detectVisible({element:e,rootMargin:"0px",callback:()=>{e.querySelector("slider-component").init()}})}catch(t){console.log(e),console.error(t)}}};var w=(e,t,r)=>{let n={};if(!e)return;let a=e.dataset.statusSoldOut,s=e.getElementsByClassName("js-option-item");if(t.variants.length<2)return;s.addEvents("change",function(){e.dispatchEvent(new CustomEvent("swatch-change",{detail:{position:+this.dataset.optionPosition,optionValue:this.value}}))}),e.addEvent("swatch-change",function({detail:{position:i,optionValue:l}}){switch(e.querySelector(`[data-selected-option='option${i}']`).innerHTML=l,i){case 1:t.options.length>1?o(2):r(f(p()));break;case 2:t.options.length===3?o(3):r(f(p()));break;case 3:r(f(p()));break}}),t.variants.forEach(i=>{if(i.available){if(n.root=n.root||[],n.root.push(i.option1),n.root=n.root.reduce((d,c)=>(d.includes(c)||d.push(c),d),[]),t.options.length>1){var l=i.option1;n[l]=n[l]||[],n[l].push(i.option2),n[l]=n[l].reduce((d,c)=>(d.includes(c)||d.push(c),d),[])}if(t.options.length===3){var l=i.option1+" / "+i.option2;n[l]=n[l]||[],n[l].push(i.option3),n[l]=n[l].reduce((c,m)=>(c.includes(m)||c.push(m),c),[])}}}),o(1);function o(i){let l=p(),d,c;switch(i){case 1:d="root",c=e.querySelector(".js-swatch-item[data-position='1']");break;case 2:d=l.option1,c=e.querySelector(".js-swatch-item[data-position='2']");break;case 3:d=l.option1+" / "+l.option2,c=e.querySelector(".js-swatch-item[data-position='3']");break}switch(c.dataset.style){case"select":{let u=c.getElementsByClassName("js-option-item")[0],v=u.value;switch(a){case"hide":{u.innerHTML=n[d].map(h=>`<option value="${h}">${h}</option>`).join(""),n[d].includes(v)&&(u.value=v);break}case"disable":{[...u.options].forEach(h=>{n[d].includes(h.value)?h.disabled=!1:(h.disabled=!0,h.selected=!1)}),[...u.options].find(h=>h.disabled==!1&&(h.selected=!0));break}}break}case"color":case"image":case"button":let m=c.getElementsByClassName("js-option-item"),y=[...m].find(u=>u.checked).value;switch(a){case"hide":m.forEach(u=>{n[d].includes(u.value)?u.closest(".swatch-group_wrapper").removeClass("d-none"):(u.closest(".swatch-group_wrapper").addClass("d-none"),y===u.value&&(u.checked=!1,m[0].checked=!0))});break;case"disable":{m.forEach(u=>{n[d].includes(u.value)?u.disabled=!1:(u.disabled=!0,y===u.value&&(u.checked=!1,m[0].checked=!0))});break}}break}e.dispatchEvent(new CustomEvent("swatch-change",{detail:{position:i,optionValue:l[`option${i}`]}}))}function p(){return[...e.getElementsByClassName("js-swatch-item")].reduce((i,l)=>{switch(l.dataset.style){case"select":let d=l.querySelector("select.single-option-selector");i[d.name]=d.value;break;case"color":case"image":case"button":let c=l.querySelectorAll("input[data-single-option-selector]");i[c[0].name]=[...c].find(m=>m.checked).value;break}return i},{})}function f(i){return t.variants.find(l=>Object.keys(i).every(d=>l[d]===i[d]))}};var g={onLoad:function(){let e=this.container;if(this.product=theme.product,this.elms={priceCompareElement:e.querySelector(".js-price-compare"),priceElement:e.querySelector(".js-price"),skuElement:e.querySelector(".js-sku"),inventoryElement:e.querySelector(".js-inventory"),mediaMain:document.getElementById("product-media-main"),mediaThumnails:document.getElementById("product-media-thumnails"),selectMaster:e.querySelector("#select-master"),addToCartButton:e.querySelector(".js-atc-btn"),formElement:e.querySelector("form[action*='/cart/add']"),labelSaveContainer:e.querySelector(".js-product-label-save"),swatchContainer:e.querySelector("swatch-component"),findStoreButton:e.querySelector(".js-find-store-btn"),quantityInputContainer:e.querySelector(".js-product-quantity"),subscribeForm:e.querySelector("#contact-notify-when-available"),dynamicCheckoutContainer:e.querySelector(".js-product-dymanic-checkout")},this.settings=JSON.parse(this.container.querySelector("[data-settings]").innerHTML),document.querySelector(".shipping-time")&&(this.initOrderDeadLine(),this.initOrderShipping()),document.querySelector("#bundledAddToCart")&&(this.initProductItemEvents(),this.initMultiVariantEvents()),this.initSliderMedia(),this.initInventory(),this.initFormAddToCart(),w(this.elms.swatchContainer,this.product,this.handleVariantChange.bind(this)),this.initScrollToReviews(),AT.getParameterByName("contact_posted")){this.switchVariantById(AT.cookie.get("subscribe-variant-id")),AT.cookie.delete("subscribe-variant-id");let n=window.location.search.replace("?","").split("&").filter(a=>!a.includes("contact_posted")).filter(Boolean).join("&");window.history.replaceState({},"",`${window.location.pathname}?${n}`)}},initProductItemEvents(){let e=document.querySelectorAll(".js-input-quantity");this.initAddToCartFormEvent()},initAddToCartFormEvent(e){let t=document.querySelector(".js-bundledAddToCart"),r=t.querySelector(".js-btn-add-to-cart");t.addEvent("submit",n=>{n.preventDefault();let s=[...t.querySelectorAll("input[name='quantity']")].reduce((o,p)=>(+p.value>0&&o.push({id:+p.dataset.variantId,quantity:+p.value}),o),[]);s.length&&(r.hasClass("has-pending")||r.insertAdjacentHTML("beforeend",'<svg class="svg-loading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; shape-rendering: auto;" width="28px" height="28px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="var(--main-color)" stroke-width="5" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg>'),r.addClass("pending","has-pending"),Cart.addMutiple(s).then(o=>{}).finally(()=>{r.removeClass("pending"),window.location.href="/cart"}))})},initMultiVariantEvents(){let e=document.querySelectorAll(".select-master-bundle"),t=document.querySelectorAll(".bundled-checkbox"),r=document.querySelector(".js-bundled-total-price"),n=Number(document.querySelector(".bundled-total-price").getAttribute("data-bundled-total-price"));t.forEach(function(a){a.addEventListener("change",function(){let s=this.closest(".bundled-item"),o=this.getAttribute("data-id"),p=Number(this.getAttribute("data-price"));this.checked?(n=n+p,s.querySelector(".js-input-quantity").value="1",document.querySelector("#"+o).removeClass("d-none"),s.querySelector(".select-group-bundle").hasClass("select-multi-variants")&&s.querySelector(".select-group-bundle").removeClass("d-none")):(n=n-p,s.querySelector(".js-input-quantity").value="0",document.querySelector("#"+o).addClass("d-none"),s.querySelector(".select-group-bundle").hasClass("select-multi-variants")&&s.querySelector(".select-group-bundle").addClass("d-none")),r.innerHTML=n.toCurrency(),document.querySelector(".bundled-total-price").setAttribute("data-bundled-total-price",n),n=Number(document.querySelector(".bundled-total-price").getAttribute("data-bundled-total-price"))})}),e.forEach(function(a){a.addEventListener("change",function(){let s=this.getAttribute("id"),o=this.closest(".bundled-item"),p=Number(this.options[this.selectedIndex].getAttribute("data-option-price")),f=Number(o.querySelector(".bundled-checkbox").setAttribute("data-price",p));o.querySelector(".js-input-quantity").setAttribute("id",this.value),o.querySelector(".js-input-quantity").setAttribute("data-variant-id",this.value),document.querySelector("."+s).innerHTML=p.toCurrency();let i=0;document.querySelectorAll(".bundled-checkbox").forEach(function(d){if(d.checked){let c=Number(d.getAttribute("data-price"));i=i+c}}),r.innerHTML=i.toCurrency(),document.querySelector(".bundled-total-price").setAttribute("data-bundled-total-price",i),n=Number(document.querySelector(".bundled-total-price").getAttribute("data-bundled-total-price"))})})},initOrderDeadLine(){let e=parseInt(document.querySelector(".shipping-time").getAttribute("data-deadline")),t=document.querySelector(".deadline"),r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate());n.setHours(e),r>=n?t.innerHTML=theme.strings.product.order_until+" <strong>"+e+":00 "+theme.strings.product.tomorrow+"</strong>":t.innerHTML=theme.strings.product.order_today_until+" <strong>"+e+":00</strong>"},initOrderShipping(){let e=new Date,t=parseInt(document.querySelector(".shipping-time").getAttribute("data-deliverytime")),r=e,n=t;for(let f=1;f<=n;f++)r=new Date(e.getTime()+f*24*60*60*1e3),(r.getDay()==0||r.getDay()==6)&&n++;let a=new Array(7);a[0]=theme.strings.date_formats.sunday,a[1]=theme.strings.date_formats.monday,a[2]=theme.strings.date_formats.tuesday,a[3]=theme.strings.date_formats.wednesday,a[4]=theme.strings.date_formats.thursday,a[5]=theme.strings.date_formats.friday,a[6]=theme.strings.date_formats.saturday;let s=a[r.getDay()],o=new Array;o[0]=theme.strings.date_formats.january,o[1]=theme.strings.date_formats.february,o[2]=theme.strings.date_formats.march,o[3]=theme.strings.date_formats.april,o[4]=theme.strings.date_formats.may,o[5]=theme.strings.date_formats.june,o[6]=theme.strings.date_formats.july,o[7]=theme.strings.date_formats.august,o[8]=theme.strings.date_formats.september,o[9]=theme.strings.date_formats.october,o[10]=theme.strings.date_formats.november,o[11]=theme.strings.date_formats.december;let p=o[r.getMonth()];document.querySelector(".dt-time").innerHTML=s+",&nbsp;"+r.getDate()+"&nbsp;"+p},initSliderMedia:function(){let{mediaMain:e,mediaThumnails:t}=this.elms;this.mainSlider=e.init({gutter:12}),t.init()},handleVariantChange:function(e){let{skuElement:t,selectMaster:r,mediaMain:n}=this.elms;if(!e){this.updateVariantStatus(),n.addClass("product-sold-out");return}this.currentVariant=e,this.updateLabelSave(e),this.updateVariantStatus(e),this.updatePrice(e),this.updateURLHash(e),e.available?n.removeClass("product-sold-out"):n.addClass("product-sold-out"),t&&(e.sku?(t.innerHTML=e.sku)&&t.closest(".product-details_sku").removeClass("d-none"):t.closest(".product-details_sku").addClass("d-none")),e.featured_media&&this.mainSlider.goTo(e.featured_media.position-1),r.value=e.id},initInventory(){let{inventoryElement:e}=this.elms;this.inventory={setStatus:(t,r)=>{if(!!this.settings.showInventory)switch(e.setAttribute("data-status",t),t){case"low-stock":{e.querySelector(".inventory_low-stock").innerHTML=(r.inventory_quantity>1?theme.strings.product.itemsLowStock:theme.strings.product.itemLowStock).replace("{{quantity}}",r.inventory_quantity);break}case"items-stock":{e.querySelector(".inventory_items-stock").innerHTML=(r.inventory_quantity>1?theme.strings.product.itemsStock:theme.strings.product.itemStock).replace("{{quantity}}",r.inventory_quantity);break}}}}},updateVariantStatus(e){let{addToCartButton:t}=this.elms;e?(this.settings.enableSubscribe&&(this.updateDynamicCheckout(e.available),this.updateSubscribeForm(e)),this.updateAddToCartButton(e),this.updateInventory(e)):(t.disabled=!0,t.querySelector("span").innerHTML=theme.strings.product.unavailable,document.querySelector(".product-wishlist-compare").addClass("d-none"),document.querySelector(".people-in-cart").addClass("d-none"),document.querySelector(".shipping-time").addClass("d-none"),this.inventory.setStatus("out-stock"))},updateDynamicCheckout(e){let{dynamicCheckoutContainer:t}=this.elms;t&&(e?t.removeClass("d-none"):t.addClass("d-none"))},updateSubscribeForm(e){let{subscribeForm:t}=this.elms,r=t.querySelector("input[name='contact[body]']"),n=t.querySelector(".js-product-subscribe");!AT.getParameterByName("contact_posted")&&n.removeClass("posted-successfully"),r.value=r.dataset.value.replace("{{product_name}}",e.name),e.available?n.addClass("d-none"):n.removeClass("d-none"),t.addEvent("submit",()=>{AT.cookie.set("subscribe-variant-id",this.currentVariant.id)})},updateAddToCartButton(e){let{addToCartButton:t,quantityInputContainer:r}=this.elms;e.available?(t.disabled=!1,t.querySelector("span").innerHTML=e.inventory_quantity==0&&e.inventory_policy=="continue"?theme.strings.product.preorder:theme.strings.product.addToCart,this.settings.enableSubscribe&&r.removeClass("d-none"),document.querySelector(".product-wishlist-compare")&&document.querySelector(".product-wishlist-compare").removeClass("d-none"),document.querySelector(".people-in-cart")&&document.querySelector(".people-in-cart").removeClass("d-none"),document.querySelector(".shipping-time")&&document.querySelector(".shipping-time").removeClass("d-none"),document.querySelector(".product-countdown-detail")&&document.querySelector(".product-countdown-detail").removeClass("d-none")):(t.disabled=!0,t.querySelector("span").innerHTML=theme.strings.product.soldOut,this.settings.enableSubscribe&&r.addClass("d-none"),document.querySelector(".product-wishlist-compare")&&document.querySelector(".product-wishlist-compare").addClass("d-none"),document.querySelector(".people-in-cart")&&document.querySelector(".people-in-cart").addClass("d-none"),document.querySelector(".shipping-time")&&document.querySelector(".shipping-time").addClass("d-none"),document.querySelector(".product-countdown-detail")&&document.querySelector(".product-countdown-detail").addClass("d-none"))},updateInventory(e){e.available?e.inventory_management?e.inventory_policy=="continue"&&e.inventory_quantity<1?this.inventory.setStatus("pre-order",e):e.inventory_quantity<=this.settings.inventoryThreshold?this.inventory.setStatus("low-stock",e):this.inventory.setStatus("items-stock",e):this.inventory.setStatus("in-stock"):this.inventory.setStatus("out-stock")},initFormAddToCart(){let{formElement:e,addToCartButton:t}=this.elms;e.addEvent("submit",r=>{r.preventDefault(),t.hasClass("has-pending")||t.insertAdjacentHTML("beforeend",'<svg class="svg-loading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; shape-rendering: auto;" width="28px" height="28px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="var(--main-color)" stroke-width="5" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg>'),t.addClass("pending","has-pending"),Cart.add(e).catch(n=>{AT.loadPopupMessage().then(()=>{Popups.closeAll(),PopupMessage.open(n.description)})}).finally(()=>{t.removeClass("pending")})})},initScrollToReviews(){let e=document.querySelector("#product-reviews-widget"),t=document.querySelector("#product-review-badge");t&&t.addEvent("click",()=>AT.scrollTo(e,1e3,e.click()))},updateLabelSave(e){let{labelSaveContainer:t}=this.elms,r=t.querySelector(".js-percent"),n=t.querySelector(".js-money-saved"),{compare_at_price:a,price:s}=e;a>s?(n.innerHTML=(a-s).toCurrency(),r.innerHTML=Math.round((a-s)/a*100),t.removeClass("d-none")):t.addClass("d-none")},updatePrice(e){let{priceCompareElement:t,priceElement:r}=this.elms;e.compare_at_price?(t.innerHTML=e.compare_at_price.toCurrency(),t.removeClass("d-none")):t.addClass("d-none"),r.innerHTML=e.price.toCurrency()},updateURLHash(e){let t=window.location.search.replace("?","").split("&").filter(Boolean);window.history.replaceState({},"",AT.getParameterByName("variant")?`${window.location.pathname}?${t.map(r=>r.includes("variant")?"variant="+e.id:r).join("&")}`:(t.unshift("variant="+e.id),`${window.location.pathname}?${t.join("&")}`))},switchVariantById(e){let{swatchContainer:t}=this.elms,r=theme.product.variants.find(n=>n.id==e);!r||r.options.forEach((n,a)=>{[...t.querySelectorAll(`[name='option${a+1}']`)].find(s=>{switch(s.tagName){case"INPUT":s.value==n&&(s.checked=!0,s.dispatchEvent(new Event("change")));break;case"SELECT":s.value=n,s.dispatchEvent(new Event("change"));break}})})}};(()=>{theme.sectionRegister.forEach(e=>{switch(e){case"product-template":register(e,g);break;case"related-products":register(e,b);break}}),load("*"),console.log("product-page.js loaded")})();})();
