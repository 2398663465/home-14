(()=>{var l=class extends HTMLElement{constructor(){super();this.getElementsByClassName("js-popup-close").addEvents("click",this.close.bind(this))}close(){this.removeClass("is-open"),AT.enableScroll()}open(){this.addClass("is-open"),AT.disableScroll()}};var f=class extends l{constructor(){super();this.elms={form:this.querySelector("form"),firstName:this.querySelector("input[name='address[first_name]']"),lastName:this.querySelector("input[name='address[last_name]']"),company:this.querySelector("input[name='address[company]']"),address1:this.querySelector("input[name='address[address1]']"),address2:this.querySelector("input[name='address[address2]']"),city:this.querySelector("input[name='address[city]']"),country:this.querySelector("select[name='address[country]']"),province:this.querySelector("select[name='address[province]']"),zip:this.querySelector("input[name='address[zip]']"),phone:this.querySelector("input[name='address[phone]']"),defaultCheckbox:this.querySelector("input[name='address[default]']"),method:this.querySelector("input[name='_method']"),heading:this.querySelector(".popup-component_box_header"),submitButton:this.querySelector("button[type='submit']")},this.settings={action:this.elms.form.getAttribute("action")},this.onCountryChange()}open(e,t){this.resetForm(),e=="edit"&&this.setForm(t),console.log(t),this.addClass("is-open"),AT.disableScroll()}resetForm(){let{form:e,firstName:t,lastName:s,company:i,address1:n,address2:d,city:u,country:o,province:r,zip:a,phone:p,defaultCheckbox:h,method:m,heading:g,submitButton:v}=this.elms;g.innerHTML=theme.strings.address.addTitle,v.innerHTML=theme.strings.address.add,t.value="",s.value="",i.value="",n.value="",d.value="",u.value="",a.value="",p.value="",r.closest("tr").addClass("d-none"),r.value="",o.value=o.options[0].value,h.checked=!1,m.value="",e.setAttribute("action",this.settings.action)}setForm(e){let{form:t,firstName:s,lastName:i,company:n,address1:d,address2:u,city:o,country:r,province:a,zip:p,phone:h,defaultCheckbox:m,method:g,heading:v,submitButton:y}=this.elms;v.innerHTML=theme.strings.address.editTitle,y.innerHTML=theme.strings.address.update,s.value=e.first_name,i.value=e.last_name,n.value=e.company,d.value=e.address1,u.value=e.address2,o.value=e.city,p.value=e.zip,h.value=e.phone,t.setAttribute("action",`${this.settings.action}/${e.id}`),a.closest("tr").addClass("d-none"),r.value=e.country,g.value="put",m.checked=e.default,r.dispatchEvent(new Event("change")),a.value=e.province||""}onCountryChange(){let{country:e,province:t}=this.elms;e.addEvent("change",function(){let s=JSON.parse(e.options[e.selectedIndex].dataset.provinces)||[];s.length?(t.innerHTML="",s.forEach(i=>{let n=document.createElement("option");n.innerHTML=i[0],n.value=i[0],t.append(n)}),t.closest("tr").removeClass("d-none")):t.closest("tr").addClass("d-none")})}};(()=>{register("account-address",{onLoad(){this.elms={popupAddress:this.container.querySelector("#popup-address"),addButton:this.container.querySelector(".js-btn-add-new"),editButtons:this.container.querySelectorAll(".js-btn-edit")},customElements.define("popup-address",f),this.initEvent()},initEvent(){let{addButton:c,editButtons:e,popupAddress:t}=this.elms;c.addEvent("click",()=>{t.open("add")}),e.addEvents("click",function(){let s=JSON.parse(this.dataset.json);console.log(s),t.open("edit",s)})}}),load("account-address")})();})();
