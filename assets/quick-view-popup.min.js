(()=>{var b=(d,e,t)=>{let s={};if(!d)return;let r=d.dataset.statusSoldOut,h=d.getElementsByClassName("js-option-item");if(e.variants.length<2)return;h.addEvents("change",function(){d.dispatchEvent(new CustomEvent("swatch-change",{detail:{position:+this.dataset.optionPosition,optionValue:this.value}}))}),d.addEvent("swatch-change",function({detail:{position:i,optionValue:o}}){switch(d.querySelector(`[data-selected-option='option${i}']`).innerHTML=o,i){case 1:e.options.length>1?c(2):t(g(m()));break;case 2:e.options.length===3?c(3):t(g(m()));break;case 3:t(g(m()));break}}),e.variants.forEach(i=>{if(i.available){if(s.root=s.root||[],s.root.push(i.option1),s.root=s.root.reduce((n,a)=>(n.includes(a)||n.push(a),n),[]),e.options.length>1){var o=i.option1;s[o]=s[o]||[],s[o].push(i.option2),s[o]=s[o].reduce((n,a)=>(n.includes(a)||n.push(a),n),[])}if(e.options.length===3){var o=i.option1+" / "+i.option2;s[o]=s[o]||[],s[o].push(i.option3),s[o]=s[o].reduce((a,u)=>(a.includes(u)||a.push(u),a),[])}}}),c(1);function c(i){let o=m(),n,a;switch(i){case 1:n="root",a=d.querySelector(".js-swatch-item[data-position='1']");break;case 2:n=o.option1,a=d.querySelector(".js-swatch-item[data-position='2']");break;case 3:n=o.option1+" / "+o.option2,a=d.querySelector(".js-swatch-item[data-position='3']");break}switch(a.dataset.style){case"select":{let l=a.getElementsByClassName("js-option-item")[0],w=l.value;switch(r){case"hide":{l.innerHTML=s[n].map(p=>`<option value="${p}">${p}</option>`).join(""),s[n].includes(w)&&(l.value=w);break}case"disable":{[...l.options].forEach(p=>{s[n].includes(p.value)?p.disabled=!1:(p.disabled=!0,p.selected=!1)}),[...l.options].find(p=>p.disabled==!1&&(p.selected=!0));break}}break}case"color":case"image":case"button":let u=a.getElementsByClassName("js-option-item"),v=[...u].find(l=>l.checked).value;switch(r){case"hide":u.forEach(l=>{s[n].includes(l.value)?l.closest(".swatch-group_wrapper").removeClass("d-none"):(l.closest(".swatch-group_wrapper").addClass("d-none"),v===l.value&&(l.checked=!1,u[0].checked=!0))});break;case"disable":{u.forEach(l=>{s[n].includes(l.value)?l.disabled=!1:(l.disabled=!0,v===l.value&&(l.checked=!1,u[0].checked=!0))});break}}break}d.dispatchEvent(new CustomEvent("swatch-change",{detail:{position:i,optionValue:o[`option${i}`]}}))}function m(){return[...d.getElementsByClassName("js-swatch-item")].reduce((i,o)=>{switch(o.dataset.style){case"select":let n=o.querySelector("select.single-option-selector");i[n.name]=n.value;break;case"color":case"image":case"button":let a=o.querySelectorAll("input[data-single-option-selector]");i[a[0].name]=[...a].find(u=>u.checked).value;break}return i},{})}function g(i){return e.variants.find(o=>Object.keys(i).every(n=>o[n]===i[n]))}};var f=class extends HTMLElement{constructor(){super();this.getElementsByClassName("js-popup-close").addEvents("click",this.close.bind(this))}close(){this.removeClass("is-open"),AT.enableScroll()}open(){this.addClass("is-open"),AT.disableScroll()}};var S=class extends f{constructor(){super()}open(e){switch(this.querySelector(".js-popup-box-inner").innerHTML=e,this.elms={priceCompareElement:this.querySelector(".js-price-compare"),priceElement:this.querySelector(".js-price"),skuElement:this.querySelector(".js-sku"),inventoryElement:this.querySelector(".js-inventory"),mediaMain:this.querySelector("#quick-view-product-media-main"),mediaThumnails:this.querySelector("#quick-view-product-media-thumnails"),selectMaster:this.querySelector("#select-master"),addToCartButton:this.querySelector(".js-atc-btn"),formElement:this.querySelector("form[action*='/cart/add']"),labelSaveContainer:this.querySelector(".js-product-label-save"),swatchContainer:this.querySelector("swatch-component"),quantityInputContainer:this.querySelector(".js-product-quantity"),subscribeForm:this.querySelector("#contact-notify-when-available"),dynamicCheckoutContainer:this.querySelector(".js-product-dymanic-checkout")},this.settings=JSON.parse(this.querySelector("[data-settings]").innerHTML),this.product=JSON.parse(this.querySelector("[data-product-json]").innerHTML),this.variantsInventory=JSON.parse(this.querySelector("[data-variants-inventory-json]").innerHTML),Object.keys(this.variantsInventory).forEach(t=>{this.product.variants.find(s=>s.id==t&&Object.assign(s,this.variantsInventory[t]))}),this.initSliderMedia(),this.initInventory(),this.initFormAddToCart(),b(this.elms.swatchContainer,this.product,this.handleVariantChange.bind(this)),theme.settings.shop.reviewApp){case"shopify":window.SPR&&(window.SPR.initDomEls(),window.SPR.loadBadges());break}AT.debounce(()=>{this.addClass("is-open"),AT.disableScroll()},50)()}initSliderMedia(){let{mediaMain:e,mediaThumnails:t}=this.elms;!customElements.get("slider-component")&&AT.initCustomElements("slider-component"),this.mainSlider=e.init({gutter:12}),t.init()}handleVariantChange(e){let{skuElement:t,selectMaster:s,mediaMain:r}=this.elms;if(!e){this.updateVariantStatus(),r.addClass("product-sold-out");return}this.currentVariant=e,this.updateLabelSave(e),this.updateVariantStatus(e),this.updatePrice(e),e.available?r.removeClass("product-sold-out"):r.addClass("product-sold-out"),t&&(e.sku?(t.innerHTML=e.sku)&&t.closest(".product-details_sku").removeClass("d-none"):t.closest(".product-details_sku").addClass("d-none")),e.featured_media&&this.mainSlider.goTo(e.featured_media.position-1),s.value=e.id}initInventory(){let{inventoryElement:e}=this.elms;this.inventory={setStatus:(t,s)=>{if(!!this.settings.showInventory)switch(e.setAttribute("data-status",t),t){case"low-stock":{e.querySelector(".inventory_low-stock").innerHTML=(s.inventory_quantity>1?theme.strings.product.itemsLowStock:theme.strings.product.itemLowStock).replace("{{quantity}}",s.inventory_quantity);break}case"items-stock":{e.querySelector(".inventory_items-stock").innerHTML=(s.inventory_quantity>1?theme.strings.product.itemsStock:theme.strings.product.itemStock).replace("{{quantity}}",s.inventory_quantity);break}}}}}updateVariantStatus(e){let{addToCartButton:t}=this.elms;e?(this.settings.enableSubscribe&&(this.updateDynamicCheckout(e.available),this.updateSubscribeForm(e)),this.updateAddToCartButton(e),this.updateInventory(e)):(t.disabled=!0,t.querySelector("span").innerHTML=theme.strings.product.soldOut,this.inventory.setStatus("out-stock"))}updateDynamicCheckout(e){let{dynamicCheckoutContainer:t}=this.elms;t&&(e?t.removeClass("d-none"):t.addClass("d-none"))}updateSubscribeForm(e){let{subscribeForm:t}=this.elms,s=t.querySelector("input[name='contact[body]']"),r=t.querySelector(".js-product-subscribe");!AT.getParameterByName("contact_posted")&&r.removeClass("posted-successfully"),s.value=s.dataset.value.replace("{{product_name}}",e.name),e.available?r.addClass("d-none"):r.removeClass("d-none"),t.addEvent("submit",()=>{AT.cookie.set("subscribe-variant-id",this.currentVariant.id)})}updateAddToCartButton(e){let{addToCartButton:t,quantityInputContainer:s}=this.elms;e.available?(t.disabled=!1,t.querySelector("span").innerHTML=e.inventory_quantity==0&&e.incoming?theme.strings.product.preorder:theme.strings.product.addToCart,this.settings.enableSubscribe&&s.removeClass("d-none")):(t.disabled=!0,t.querySelector("span").innerHTML=theme.strings.product.soldOut,this.settings.enableSubscribe&&s.addClass("d-none"))}updateInventory(e){e.available?e.inventory_management?e.inventory_policy=="continue"&&e.inventory_quantity<1?this.inventory.setStatus("pre-order",e):e.inventory_quantity<=this.settings.inventoryThreshold?this.inventory.setStatus("low-stock",e):this.inventory.setStatus("items-stock",e):this.inventory.setStatus("in-stock"):this.inventory.setStatus("out-stock")}initFormAddToCart(){let{formElement:e,addToCartButton:t}=this.elms;e.addEvent("submit",s=>{t.hasClass("has-pending")||t.insertAdjacentHTML("beforeend",'<svg class="svg-loading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; shape-rendering: auto;" width="28px" height="28px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="var(--main-color)" stroke-width="5" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">  <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg>'),s.preventDefault(),t.addClass("pending","has-pending"),Cart.add(e).then(()=>{this.close()}).catch(r=>{AT.loadPopupMessage().then(()=>{Popups.closeAll(),PopupMessage.open(r.description)})}).finally(()=>{t.removeClass("pending")})})}updateLabelSave(e){let{labelSaveContainer:t}=this.elms,s=t.querySelector(".js-percent"),r=t.querySelector(".js-money-saved"),{compare_at_price:h,price:c}=e;h>c?(r.innerHTML=(h-c).toCurrency(),s.innerHTML=Math.round((h-c)/h*100),t.removeClass("d-none")):t.addClass("d-none")}updatePrice(e){let{priceCompareElement:t,priceElement:s}=this.elms;e.compare_at_price?(t.innerHTML=e.compare_at_price.toCurrency(),t.removeClass("d-none")):t.addClass("d-none"),s.innerHTML=e.price.toCurrency()}switchVariantById(e){let{swatchContainer:t}=this.elms,s=theme.product.variants.find(r=>r.id==e);!s||s.options.forEach((r,h)=>{[...t.querySelectorAll(`[name='option${h+1}']`)].find(c=>{switch(c.tagName){case"INPUT":c.value==r&&(c.checked=!0,c.dispatchEvent(new Event("change")));break;case"SELECT":c.value=r,c.dispatchEvent(new Event("change"));break}})})}},k=document.getElementById("popup-container"),y=k.content.querySelector("popup-quick-view");y&&(k.insertAdjacentElement("beforebegin",y),customElements.define("popup-quick-view",S),window.PopupQuickView=y,Popups.push("popup-quick-view",window.PopupQuickView));console.log("popup-quick-view script loaded");})();
